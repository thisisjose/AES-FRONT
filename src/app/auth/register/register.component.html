<div class="login-container">
  <div class="login-wrapper">
    <div class="login-card">
      <div class="login-header">
        <div class="logo-container">
          <div class="shield-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
            </svg>
          </div>
          <h2>Cyber Seguridad</h2>
        </div>
        <p>Registro en el Sistema</p>
      </div>
      
      <form (ngSubmit)="register()" #registerForm="ngForm">
        <!-- Usuario -->
        <div class="input-group">
          <label for="username">Usuario</label>
          <div class="input-wrapper">
            <i class="icon-user"></i>
            <input
              id="username"
              [(ngModel)]="username"
              name="username"
              type="text"
              required
              pattern="^[a-zA-Z0-9]*$"
              (keypress)="validateUsername($event)"
              maxlength="15"
              minlength="6"
              #usernameInput="ngModel"
              placeholder="Introduce Usuario"
              [ngClass]="{'input-error': usernameInput.invalid && usernameInput.touched}"
            />
          </div>
          <div *ngIf="usernameInput.invalid && usernameInput.touched" class="error-message">
            <span *ngIf="usernameInput.errors?.['required']">Usuario es requerido</span>
            <span *ngIf="usernameInput.errors?.['pattern']">Secuencia de caracteres inválida</span>
            <span *ngIf="usernameInput.errors?.['minlength']">El usuario debe tener al menos 6 caracteres</span>
            <span *ngIf="usernameInput.errors?.['maxlength']">El usuario debe tener como máximo 15 caracteres</span>
          </div>
        </div>

        <!-- Contraseña -->
        <div class="input-group">
          <label for="password">Contraseña</label>
          <div class="input-wrapper">
            <i class="icon-lock"></i>
            <input
              id="password"
              [(ngModel)]="password"
              name="password"
              type="password"
              required
              pattern="^(?=.*[A-Z])(?=.*\d)[A-Za-z\d]{6,15}$"
              maxlength="15"
              minlength="6"
              #passwordInput="ngModel"
              placeholder="Introduce Contraseña"
              [ngClass]="{'input-error': passwordInput.invalid && passwordInput.touched}"
            />
            <span class="password-toggle">
              <i class="icon-eye"></i>
            </span>
          </div>
          <div *ngIf="passwordInput.invalid && passwordInput.touched" class="error-message">
            <span *ngIf="passwordInput.errors?.['required']">Contraseña es requerida</span>
            <span *ngIf="passwordInput.errors?.['pattern']">Debe contener al menos una mayúscula y un número</span>
            <span *ngIf="passwordInput.errors?.['minlength']">Debe tener al menos 6 caracteres</span>
            <span *ngIf="passwordInput.errors?.['maxlength']">Debe tener como máximo 15 caracteres</span>
          </div>
        </div>

        <!-- Confirmar Contraseña -->
        <div class="input-group">
          <label for="confirmPassword">Confirmar Contraseña</label>
          <div class="input-wrapper">
            <i class="icon-lock"></i>
            <input
              id="confirmPassword"
              [(ngModel)]="confirmPassword"
              name="confirmPassword"
              type="password"
              required
              #confirmPasswordInput="ngModel"
              placeholder="Confirma tu Contraseña"
              [ngClass]="{'input-error': confirmPasswordInput.invalid && confirmPasswordInput.touched}"
            />
            <span class="password-toggle">
              <i class="icon-eye"></i>
            </span>
          </div>
          <div *ngIf="confirmPasswordInput.invalid && confirmPasswordInput.touched" class="error-message">
            <span *ngIf="confirmPasswordInput.errors?.['required']">Confirmar contraseña es requerido</span>
            <span *ngIf="confirmPassword && confirmPassword !== password">Las contraseñas no coinciden</span>
          </div>
        </div>

        <!-- Botón de Registro -->
        <button 
          type="submit" 
          class="login-button" 
          [disabled]="registerForm.invalid"
        >
          Registrarse
        </button>

        <div class="global-error" *ngIf="errorMessage">
          {{ errorMessage }}
        </div>

        <div class="login-footer">
          <a class="register-link" (click)="goToLogin()">Ir a Login</a>
        </div>
      </form>
    </div>
  </div>
</div>